<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pa' la Brasa - Sistema de Gestión</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#000000',
                        secondary: '#e53e3e',
                        accent: '#f59e0b',
                    }
                }
            }
        }
    </script>
    <style>
        .order-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .category-btn.active {
            background-color: #e53e3e;
            color: white;
        }
        .status-badge {
            font-size: 0.7rem;
            padding: 0.2rem 0.5rem;
            border-radius: 9999px;
        }
        .status-new {
            background-color: #38a169;
            color: white;
        }
        .status-prep {
            background-color: #dd6b20;
            color: white;
        }
        .status-ready {
            background-color: #805ad5;
            color: white;
        }
        .status-served {
            background-color: #3182ce;
            color: white;
        }
        .status-paid {
            background-color: #718096;
            color: white;
        }
        @media (max-width: 768px) {
            .mobile-hidden {
                display: none;
            }
        }
        /* Animación para notificaciones */
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <!-- Login Screen (initial state) -->
    <div id="login-screen" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-md">
            <div class="flex justify-center mb-6">
                <img src="https://images.rappi.pe/restaurants_logo/formaewvfegrto-home-1621891061532.png" alt="Pa' la Brasa" class="h-20">
            </div>
            <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">Iniciar Sesión</h2>
            <div class="space-y-4">
                <div>
                    <label for="username" class="block text-sm font-medium text-gray-700">Usuario</label>
                    <input type="text" id="username" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary focus:border-primary">
                </div>
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700">Contraseña</label>
                    <input type="password" id="password" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary focus:border-primary">
                </div>
                <div>
                    <label for="role" class="block text-sm font-medium text-gray-700">Rol</label>
                    <select id="role" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary focus:border-primary">
                        <option value="waiter">Mesero</option>
                        <option value="kitchen">Cocina</option>
                        <option value="cashier">Caja</option>
                        <option value="admin">Administrador</option>
                    </select>
                </div>
                <div class="flex items-center">
                    <input id="remember" type="checkbox" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                    <label for="remember" class="ml-2 block text-sm text-gray-700">Recordar mi usuario</label>
                </div>
                <button id="login-btn" class="w-full bg-primary hover:bg-gray-800 text-white py-2 px-4 rounded-md font-medium transition duration-150">
                    Ingresar
                </button>
            </div>
        </div>
    </div>

    <!-- Main App Container (hidden initially) -->
    <div id="app-container" class="hidden">
        <!-- Header -->
        <header class="bg-primary text-white shadow-md">
            <div class="container mx-auto px-4 py-3 flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <img src="https://images.rappi.pe/restaurants_logo/formaewvfegrto-home-1621891061532.png" alt="Pa' la Brasa" class="h-8">
                    <h1 class="text-xl font-bold">Pa' la Brasa</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <span id="current-time" class="hidden md:block"></span>
                    <div id="notification-bell" class="relative hidden">
                        <i class="fas fa-bell text-xl cursor-pointer"></i>
                        <span id="notification-count" class="absolute -top-2 -right-2 bg-secondary text-white rounded-full w-5 h-5 flex items-center justify-center text-xs">0</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span id="user-role" class="hidden md:block text-sm bg-white bg-opacity-20 px-2 py-1 rounded-full"></span>
                        <button id="user-btn" class="bg-secondary hover:bg-red-700 px-4 py-2 rounded-full flex items-center">
                            <i class="fas fa-user mr-2"></i>
                            <span class="mobile-hidden" id="username-display">Usuario</span>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content - Dynamic based on role -->
        <main class="container mx-auto px-4 py-6">
            <!-- Waiter View -->
            <div id="waiter-view" class="hidden">
                <!-- Table Selection -->
                <div id="table-selection" class="mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold text-gray-800">Mesas</h2>
                        <button id="new-table-btn" class="bg-primary hover:bg-gray-800 text-white px-4 py-2 rounded-md flex items-center">
                            <i class="fas fa-plus mr-2"></i> Nueva Mesa
                        </button>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                        <!-- Sample Tables -->
                        <div class="bg-white rounded-lg shadow-md p-4 border-l-4 border-green-500 cursor-pointer hover:shadow-lg transition-shadow">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="font-bold">Mesa #1</h3>
                                    <p class="text-sm text-gray-500">4 personas</p>
                                </div>
                                <span class="status-badge status-new">NUEVO</span>
                            </div>
                            <div class="mt-2 text-sm text-gray-600">
                                <p>Pollo a la Brasa (1/2)</p>
                                <p>Inca Kola 1L</p>
                            </div>
                            <div class="mt-2 text-xs text-gray-500">
                                <i class="fas fa-clock mr-1"></i> 5 min
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow-md p-4 border-l-4 border-orange-500 cursor-pointer hover:shadow-lg transition-shadow">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="font-bold">Mesa #3</h3>
                                    <p class="text-sm text-gray-500">2 personas</p>
                                </div>
                                <span class="status-badge status-prep">EN PREP</span>
                            </div>
                            <div class="mt-2 text-sm text-gray-600">
                                <p>Pollo Broaster</p>
                                <p>Coca Cola 500ml</p>
                            </div>
                            <div class="mt-2 text-xs text-gray-500">
                                <i class="fas fa-clock mr-1"></i> 12 min
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow-md p-4 border-l-4 border-purple-500 cursor-pointer hover:shadow-lg transition-shadow">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="font-bold">Mesa #5</h3>
                                    <p class="text-sm text-gray-500">6 personas</p>
                                </div>
                                <span class="status-badge status-ready">LISTO</span>
                            </div>
                            <div class="mt-2 text-sm text-gray-600">
                                <p>Pollo a la Brasa (entero)</p>
                                <p>Parrillada Familiar</p>
                                <p>3 Gaseosas</p>
                            </div>
                            <div class="mt-2 text-xs text-gray-500">
                                <i class="fas fa-clock mr-1"></i> 25 min
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow-md p-4 border-l-4 border-blue-500 cursor-pointer hover:shadow-lg transition-shadow">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="font-bold">Mesa #2</h3>
                                    <p class="text-sm text-gray-500">3 personas</p>
                                </div>
                                <span class="status-badge status-served">SERVIDO</span>
                            </div>
                            <div class="mt-2 text-sm text-gray-600">
                                <p>1/2 Pollo a la Brasa</p>
                                <p>2 Chicha Morada</p>
                            </div>
                            <div class="mt-2 text-xs text-gray-500">
                                <i class="fas fa-clock mr-1"></i> 40 min
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Order Taking -->
                <div id="order-taking" class="hidden bg-white rounded-lg shadow-md p-4">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold text-gray-800" id="current-table">Mesa #1</h2>
                        <div class="flex items-center space-x-2">
                            <span class="bg-primary text-white px-3 py-1 rounded-full text-sm">4 personas</span>
                            <button id="close-order-btn" class="text-gray-500 hover:text-gray-700">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>

                    <div class="flex overflow-x-auto pb-2 mb-4 space-x-2">
                        <button class="category-btn active px-4 py-2 rounded-full bg-red-100 text-primary whitespace-nowrap">
                            <i class="fas fa-drumstick-bite mr-2"></i> Pollos
                        </button>
                        <button class="category-btn px-4 py-2 rounded-full bg-gray-100 text-gray-800 whitespace-nowrap">
                            <i class="fas fa-plate-wheat mr-2"></i> Platos
                        </button>
                        <button class="category-btn px-4 py-2 rounded-full bg-gray-100 text-gray-800 whitespace-nowrap">
                            <i class="fas fa-glass-water mr-2"></i> Bebidas
                        </button>
                        <button class="category-btn px-4 py-2 rounded-full bg-gray-100 text-gray-800 whitespace-nowrap">
                            <i class="fas fa-ice-cream mr-2"></i> Postres
                        </button>
                    </div>

                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                        <!-- Pollo a la Brasa -->
                        <div class="bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow">
                            <img src="https://images.unsplash.com/photo-1600804385506-5f2bb3a689b5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Pollo a la brasa" class="w-full h-32 object-cover">
                            <div class="p-3">
                                <h3 class="font-bold text-gray-800">Pollo a la Brasa</h3>
                                <p class="text-sm text-gray-600 mb-2">Pollo entero con papas y ensalada</p>
                                <div class="flex justify-between items-center">
                                    <span class="font-bold text-primary">S/ 35.00</span>
                                    <button class="bg-primary hover:bg-gray-800 text-white px-3 py-1 rounded-full text-sm add-item-btn" data-item='{"id":1,"name":"Pollo a la Brasa","price":35,"category":"pollos"}'>
                                        <i class="fas fa-plus"></i> Agregar
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Pollo Broaster -->
                        <div class="bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow">
                            <img src="https://images.unsplash.com/photo-1518492104633-130d0cc84637?ixlib=rb-4.0.3&ixid=M3wxMLA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Pollo broaster" class="w-full h-32 object-cover">
                            <div class="p-3">
                                <h3 class="font-bold text-gray-800">Pollo Broaster</h3>
                                <p class="text-sm text-gray-600 mb-2">Pollo crocante con papas fritas</p>
                                <div class="flex justify-between items-center">
                                    <span class="font-bold text-primary">S/ 30.00</span>
                                    <button class="bg-primary hover:bg-gray-800 text-white px-3 py-1 rounded-full text-sm add-item-btn" data-item='{"id":2,"name":"Pollo Broaster","price":30,"category":"pollos"}'>
                                        <i class="fas fa-plus"></i> Agregar
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- 1/2 Pollo a la Brasa -->
                        <div class="bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow">
                            <img src="https://images.unsplash.com/photo-1600804385506-5f2bb3a689b5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="1/2 Pollo a la brasa" class="w-full h-32 object-cover">
                            <div class="p-3">
                                <h3 class="font-bold text-gray-800">1/2 Pollo a la Brasa</h3>
                                <p class="text-sm text-gray-600 mb-2">Medio pollo con papas y ensalada</p>
                                <div class="flex justify-between items-center">
                                    <span class="font-bold text-primary">S/ 20.00</span>
                                    <button class="bg-primary hover:bg-gray-800 text-white px-3 py-1 rounded-full text-sm add-item-btn" data-item='{"id":3,"name":"1/2 Pollo a la Brasa","price":20,"category":"pollos"}'>
                                        <i class="fas fa-plus"></i> Agregar
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Parrillada Familiar -->
                        <div class="bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow">
                            <img src="https://images.unsplash.com/photo-1544025162-d76694265947?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Parrillada" class="w-full h-32 object-cover">
                            <div class="p-3">
                                <h3 class="font-bold text-gray-800">Parrillada Familiar</h3>
                                <p class="text-sm text-gray-600 mb-2">Carne, pollo, chorizo y anticuchos</p>
                                <div class="flex justify-between items-center">
                                    <span class="font-bold text-primary">S/ 65.00</span>
                                    <button class="bg-primary hover:bg-gray-800 text-white px-3 py-1 rounded-full text-sm add-item-btn" data-item='{"id":4,"name":"Parrillada Familiar","price":65,"category":"platos"}'>
                                        <i class="fas fa-plus"></i> Agregar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Current Order -->
                    <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                        <div class="flex justify-between items-center mb-3">
                            <h3 class="font-bold text-gray-800">Orden Actual</h3>
                            <div class="flex items-center">
                                <span class="text-sm text-gray-600 mr-2">Total:</span>
                                <span class="font-bold text-primary">S/ 0.00</span>
                            </div>
                        </div>

                        <div id="order-items-container" class="space-y-2 mb-3">
                            <!-- Items will be added here dynamically -->
                            <p class="text-sm text-gray-500 text-center py-4">No hay items en la orden</p>
                        </div>

                        <div class="flex justify-between items-center">
                            <button id="clear-order-btn" class="text-gray-500 hover:text-gray-700 text-sm">
                                <i class="fas fa-trash mr-1"></i> Limpiar
                            </button>
                            <button id="send-to-kitchen-btn" class="bg-primary hover:bg-gray-800 text-white px-4 py-2 rounded-md font-medium disabled:opacity-50" disabled>
                                <i class="fas fa-paper-plane mr-2"></i> Enviar a Cocina
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Kitchen View -->
            <div id="kitchen-view" class="hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold text-gray-800">Órdenes en Cocina</h2>
                    <div class="flex space-x-2">
                        <button class="bg-primary hover:bg-gray-800 text-white px-3 py-1 rounded-md text-sm">
                            <i class="fas fa-filter mr-1"></i> Filtrar
                        </button>
                        <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-3 py-1 rounded-md text-sm">
                            <i class="fas fa-print mr-1"></i> Imprimir
                        </button>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <!-- NEW Orders -->
                    <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                        <div class="flex justify-between items-center mb-3">
                            <h3 class="font-bold text-gray-800">Nuevas</h3>
                            <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">3</span>
                        </div>
                        <div class="space-y-3">
                            <!-- Order Card 1 -->
                            <div class="bg-white rounded-lg shadow-sm p-3 border-l-4 border-green-500">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <h4 class="font-bold">Orden #125</h4>
                                        <p class="text-sm text-gray-500">Mesa #3 - 12:45 PM</p>
                                    </div>
                                    <span class="status-badge status-new">NUEVO</span>
                                </div>
                                <ul class="text-sm space-y-1 mb-3">
                                    <li class="flex items-center">
                                        <input type="checkbox" class="mr-2 h-4 w-4 text-primary">
                                        <span>1 Pollo a la Brasa (1/2)</span>
                                    </li>
                                    <li class="flex items-center">
                                        <input type="checkbox" class="mr-2 h-4 w-4 text-primary">
                                        <span>2 Gaseosas</span>
                                    </li>
                                </ul>
                                <div class="flex justify-between items-center">
                                    <button class="text-xs text-gray-500 hover:text-gray-700">
                                        <i class="fas fa-clock mr-1"></i> 5 min
                                    </button>
                                    <button class="bg-primary hover:bg-gray-800 text-white px-3 py-1 rounded-full text-xs">
                                        <i class="fas fa-play mr-1"></i> Iniciar
                                    </button>
                                </div>
                            </div>

                            <!-- Order Card 2 -->
                            <div class="bg-white rounded-lg shadow-sm p-3 border-l-4 border-green-500">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <h4 class="font-bold">Orden #126</h4>
                                        <p class="text-sm text-gray-500">Para llevar - 12:50 PM</p>
                                    </div>
                                    <span class="status-badge status-new">NUEVO</span>
                                </div>
                                <ul class="text-sm space-y-1 mb-3">
                                    <li class="flex items-center">
                                        <input type="checkbox" class="mr-2 h-4 w-4 text-primary">
                                        <span>1 Pollo Broaster</span>
                                    </li>
                                    <li class="flex items-center">
                                        <input type="checkbox" class="mr-2 h-4 w-4 text-primary">
                                        <span>1 Inca Kola 2L</span>
                                    </li>
                                </ul>
                                <div class="flex justify-between items-center">
                                    <button class="text-xs text-gray-500 hover:text-gray-700">
                                        <i class="fas fa-clock mr-1"></i> 3 min
                                    </button>
                                    <button class="bg-primary hover:bg-gray-800 text-white px-3 py-1 rounded-full text-xs">
                                        <i class="fas fa-play mr-1"></i> Iniciar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- IN PREP Orders -->
                    <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                        <div class="flex justify-between items-center mb-3">
                            <h3 class="font-bold text-gray-800">En Preparación</h3>
                            <span class="bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs">2</span>
                        </div>
                        <div class="space-y-3">
                            <!-- Order Card 3 -->
                            <div class="bg-white rounded-lg shadow-sm p-3 border-l-4 border-orange-500">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <h4 class="font-bold">Orden #123</h4>
                                        <p class="text-sm text-gray-500">Mesa #5 - 12:30 PM</p>
                                    </div>
                                    <span class="status-badge status-prep">EN PREP</span>
                                </div>
                                <ul class="text-sm space-y-1 mb-3">
                                    <li class="flex items-center">
                                        <input type="checkbox" class="mr-2 h-4 w-4 text-primary" checked>
                                        <span class="line-through text-gray-400">1 Pollo a la Brasa (entero)</span>
                                    </li>
                                    <li class="flex items-center">
                                        <input type="checkbox" class="mr-2 h-4 w-4 text-primary">
                                        <span>1 Parrillada Familiar</span>
                                    </li>
                                    <li class="flex items-center">
                                        <input type="checkbox" class="mr-2 h-4 w-4 text-primary" checked>
                                        <span class="line-through text-gray-400">3 Gaseosas</span>
                                    </li>
                                </ul>
                                <div class="flex justify-between items-center">
                                    <button class="text-xs text-gray-500 hover:text-gray-700">
                                        <i class="fas fa-clock mr-1"></i> 15 min
                                    </button>
                                    <button class="bg-primary hover:bg-gray-800 text-white px-3 py-1 rounded-full text-xs">
                                        <i class="fas fa-check mr-1"></i> Completar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- READY Orders -->
                    <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                        <div class="flex justify-between items-center mb-3">
                            <h3 class="font-bold text-gray-800">Listas</h3>
                            <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs">1</span>
                        </div>
                        <div class="space-y-3">
                            <!-- Order Card 4 -->
                            <div class="bg-white rounded-lg shadow-sm p-3 border-l-4 border-purple-500">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <h4 class="font-bold">Orden #124</h4>
                                        <p class="text-sm text-gray-500">Mesa #2 - 12:35 PM</p>
                                    </div>
                                    <span class="status-badge status-ready">LISTO</span>
                                </div>
                                <ul class="text-sm space-y-1 mb-3">
                                    <li class="flex items-center">
                                        <input type="checkbox" class="mr-2 h-4 w-4 text-primary" checked>
                                        <span class="line-through text-gray-400">1/2 Pollo a la Brasa</span>
                                    </li>
                                    <li class="flex items-center">
                                        <input type="checkbox" class="mr-2 h-4 w-4 text-primary" checked>
                                        <span class="line-through text-gray-400">2 Chicha Morada</span>
                                    </li>
                                </ul>
                                <div class="flex justify-between items-center">
                                    <button class="text-xs text-gray-500 hover:text-gray-700">
                                        <i class="fas fa-clock mr-1"></i> 10 min
                                    </button>
                                    <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-3 py-1 rounded-full text-xs">
                                        <i class="fas fa-check-double mr-1"></i> Entregado
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cashier View -->
            <div id="cashier-view" class="hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold text-gray-800">Pagos Pendientes</h2>
                    <div class="flex space-x-2">
                        <button class="bg-primary hover:bg-gray-800 text-white px-3 py-1 rounded-md text-sm">
                            <i class="fas fa-search mr-1"></i> Buscar
                        </button>
                        <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-3 py-1 rounded-md text-sm">
                            <i class="fas fa-history mr-1"></i> Historial
                        </button>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Orders List -->
                    <div class="bg-white rounded-lg shadow-md p-4">
                        <h3 class="font-bold text-gray-800 mb-3">Órdenes por Cobrar</h3>
                        <div class="space-y-3">
                            <!-- Order 1 -->
                            <div class="border border-gray-200 rounded-lg p-3 cursor-pointer hover:bg-gray-50">
                                <div class="flex justify-between items-start mb-1">
                                    <div>
                                        <h4 class="font-bold">Orden #125</h4>
                                        <p class="text-sm text-gray-500">Mesa #3 - 4 personas</p>
                                    </div>
                                    <span class="font-bold text-primary">S/ 48.00</span>
                                </div>
                                <div class="text-sm text-gray-600 mb-1">
                                    <p>• Pollo a la Brasa (1/2)</p>
                                    <p>• 2 Gaseosas</p>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-xs text-gray-500">
                                        <i class="fas fa-clock mr-1"></i> 25 min
                                    </span>
                                    <span class="status-badge status-served">SERVIDO</span>
                                </div>
                            </div>

                            <!-- Order 2 -->
                            <div class="border border-gray-200 rounded-lg p-3 cursor-pointer hover:bg-gray-50">
                                <div class="flex justify-between items-start mb-1">
                                    <div>
                                        <h4 class="font-bold">Orden #126</h4>
                                        <p class="text-sm text-gray-500">Para llevar</p>
                                    </div>
                                    <span class="font-bold text-primary">S/ 73.00</span>
                                </div>
                                <div class="text-sm text-gray-600 mb-1">
                                    <p>• Parrillada Familiar</p>
                                    <p>• Inca Kola 2L</p>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-xs text-gray-500">
                                        <i class="fas fa-clock mr-1"></i> 18 min
                                    </span>
                                    <span class="status-badge status-ready">LISTO</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Payment Details -->
                    <div class="bg-white rounded-lg shadow-md p-4">
                        <h3 class="font-bold text-gray-800 mb-3">Detalle de Pago</h3>
                        <div class="border-b border-gray-200 pb-3 mb-3">
                            <h4 class="font-medium">Orden #125 - Mesa #3</h4>
                            <p class="text-sm text-gray-500">4 personas - 25 min</p>
                        </div>

                        <div class="space-y-2 mb-4">
                            <div class="flex justify-between">
                                <span>Pollo a la Brasa (1/2)</span>
                                <span>S/ 20.00</span>
                            </div>
                            <div class="flex justify-between">
                                <span>2 Gaseosas</span>
                                <span>S/ 16.00</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Ensalada Extra</span>
                                <span>S/ 5.00</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Bolsa</span>
                                <span>S/ 0.30</span>
                            </div>
                        </div>

                        <div class="border-t border-gray-200 pt-3 mb-4">
                            <div class="flex justify-between mb-1">
                                <span>Subtotal:</span>
                                <span>S/ 41.30</span>
                            </div>
                            <div class="flex justify-between mb-1">
                                <span>IGV (18%):</span>
                                <span>S/ 7.43</span>
                            </div>
                            <div class="flex justify-between font-bold text-lg">
                                <span>Total:</span>
                                <span>S/ 48.73</span>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Descuento</label>
                            <div class="flex space-x-2">
                                <select class="flex-1 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary focus:border-primary">
                                    <option>Sin descuento</option>
                                    <option>10% Cliente frecuente</option>
                                    <option>15% Aniversario</option>
                                    <option>Otro</option>
                                </select>
                                <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-3 py-2 rounded-md">
                                    <i class="fas fa-percentage"></i>
                                </button>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Método de Pago</label>
                            <div class="grid grid-cols-2 gap-2">
                                <button class="bg-gray-100 hover:bg-gray-200 py-2 rounded-md border border-gray-300">
                                    <i class="fas fa-money-bill-wave mr-1"></i> Efectivo
                                </button>
                                <button class="bg-gray-100 hover:bg-gray-200 py-2 rounded-md border border-gray-300">
                                    <i class="fas fa-credit-card mr-1"></i> Tarjeta
                                </button>
                                <button class="bg-gray-100 hover:bg-gray-200 py-2 rounded-md border border-gray-300">
                                    <i class="fas fa-mobile-alt mr-1"></i> Yape/Plin
                                </button>
                                <button class="bg-gray-100 hover:bg-gray-200 py-2 rounded-md border border-gray-300">
                                    <i class="fas fa-random mr-1"></i> Mixto
                                </button>
                            </div>
                        </div>

                        <button class="w-full bg-primary hover:bg-gray-800 text-white py-2 px-4 rounded-md font-medium">
                            <i class="fas fa-cash-register mr-2"></i> Cobrar y Cerrar
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Mobile Bottom Navigation -->
        <div class="lg:hidden fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200">
            <div class="flex justify-around py-3">
                <button class="flex flex-col items-center text-primary nav-btn" data-view="waiter">
                    <i class="fas fa-home text-xl"></i>
                    <span class="text-xs mt-1">Mesas</span>
                </button>
                <button class="flex flex-col items-center text-gray-500 nav-btn" data-view="kitchen">
                    <i class="fas fa-utensils text-xl"></i>
                    <span class="text-xs mt-1">Cocina</span>
                </button>
                <button class="flex flex-col items-center text-gray-500 nav-btn" data-view="cashier">
                    <i class="fas fa-cash-register text-xl"></i>
                    <span class="text-xs mt-1">Caja</span>
                </button>
                <button class="flex flex-col items-center text-gray-500">
                    <i class="fas fa-cog text-xl"></i>
                    <span class="text-xs mt-1">Más</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification-toast" class="fixed top-4 right-4 bg-primary text-white px-4 py-3 rounded-lg shadow-lg transform translate-x-full transition-transform duration-300 z-50 hidden">
        <div class="flex items-start">
            <div class="flex-shrink-0 pt-0.5">
                <i class="fas fa-bell"></i>
            </div>
            <div class="ml-3 w-0 flex-1">
                <p class="text-sm font-medium" id="toast-message">¡Nueva orden lista!</p>
                <p class="mt-1 text-xs opacity-80" id="toast-details">Orden #123 para Mesa #5 está lista para servir</p>
            </div>
            <div class="ml-4 flex-shrink-0 flex">
                <button class="bg-white bg-opacity-20 rounded-md inline-flex text-white focus:outline-none" id="close-toast">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // State management
        const state = {
            currentUser: null,
            currentRole: null,
            currentOrder: {
                table: null,
                items: [],
                subtotal: 0,
                tax: 0,
                total: 0
            },
            notifications: []
        };

        // DOM Elements
        const loginScreen = document.getElementById('login-screen');
        const appContainer = document.getElementById('app-container');
        const loginBtn = document.getElementById('login-btn');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const roleSelect = document.getElementById('role');
        const usernameDisplay = document.getElementById('username-display');
        const userRoleDisplay = document.getElementById('user-role');
        const currentTime = document.getElementById('current-time');
        const notificationBell = document.getElementById('notification-bell');
        const notificationCount = document.getElementById('notification-count');
        const notificationToast = document.getElementById('notification-toast');
        const toastMessage = document.getElementById('toast-message');
        const toastDetails = document.getElementById('toast-details');
        const closeToast = document.getElementById('close-toast');

        // View elements
        const waiterView = document.getElementById('waiter-view');
        const kitchenView = document.getElementById('kitchen-view');
        const cashierView = document.getElementById('cashier-view');
        const tableSelection = document.getElementById('table-selection');
        const orderTaking = document.getElementById('order-taking');
        const currentTable = document.getElementById('current-table');
        const closeOrderBtn = document.getElementById('close-order-btn');
        const orderItemsContainer = document.getElementById('order-items-container');
        const clearOrderBtn = document.getElementById('clear-order-btn');
        const sendToKitchenBtn = document.getElementById('send-to-kitchen-btn');
        const categoryButtons = document.querySelectorAll('.category-btn');
        const addItemButtons = document.querySelectorAll('.add-item-btn');
        const navButtons = document.querySelectorAll('.nav-btn');

        // Initialize the app
        function init() {
            // Update time every second
            updateTime();
            setInterval(updateTime, 1000);

            // Event listeners
            loginBtn.addEventListener('click', handleLogin);
            closeOrderBtn.addEventListener('click', () => {
                orderTaking.classList.add('hidden');
                tableSelection.classList.remove('hidden');
            });
            clearOrderBtn.addEventListener('click', clearCurrentOrder);
            closeToast.addEventListener('click', hideNotification);
            
            // Add item buttons
            addItemButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const item = JSON.parse(this.getAttribute('data-item'));
                    addItemToOrder(item);
                });
            });

            // Category buttons
            categoryButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    categoryButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // Navigation buttons
            navButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const view = this.getAttribute('data-view');
                    showView(view);
                    
                    // Update active state
                    navButtons.forEach(b => {
                        b.classList.remove('text-primary');
                        b.classList.add('text-gray-500');
                    });
                    this.classList.remove('text-gray-500');
                    this.classList.add('text-primary');
                });
            });

            // Simulate WebSocket connection
            simulateWebSocket();
        }

        // Update current time
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('es-PE', { hour: '2-digit', minute: '2-digit' });
            const dateString = now.toLocaleDateString('es-PE', { weekday: 'long', day: 'numeric', month: 'long' });
            currentTime.textContent = `${dateString}, ${timeString}`;
        }

        // Handle login
        function handleLogin() {
            const username = usernameInput.value.trim();
            const password = passwordInput.value.trim();
            const role = roleSelect.value;

            if (!username || !password) {
                alert('Por favor ingrese usuario y contraseña');
                return;
            }

            // Set current user
            state.currentUser = username;
            state.currentRole = role;
            usernameDisplay.textContent = username;
            
            // Set role display
            let roleText = '';
            switch(role) {
                case 'waiter':
                    roleText = 'Mesero';
                    break;
                case 'kitchen':
                    roleText = 'Cocina';
                    break;
                case 'cashier':
                    roleText = 'Caja';
                    break;
                case 'admin':
                    roleText = 'Administrador';
                    break;
            }
            userRoleDisplay.textContent = roleText;

            // Hide login and show app
            loginScreen.classList.add('hidden');
            appContainer.classList.remove('hidden');

            // Show appropriate view based on role
            showView(role);
        }

        // Show specific view based on role
        function showView(view) {
            // Hide all views first
            waiterView.classList.add('hidden');
            kitchenView.classList.add('hidden');
            cashierView.classList.add('hidden');
            tableSelection.classList.remove('hidden');
            orderTaking.classList.add('hidden');

            // Show the selected view
            switch(view) {
                case 'waiter':
                    waiterView.classList.remove('hidden');
                    break;
                case 'kitchen':
                    kitchenView.classList.remove('hidden');
                    break;
                case 'cashier':
                    cashierView.classList.remove('hidden');
                    break;
                default:
                    waiterView.classList.remove('hidden');
            }
        }

        // Add item to current order
        function addItemToOrder(item) {
            // Check if item already exists in order
            const existingItem = state.currentOrder.items.find(i => i.id === item.id);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                state.currentOrder.items.push({
                    ...item,
                    quantity: 1,
                    notes: ''
                });
            }

            updateOrderDisplay();
        }

        // Update order display
        function updateOrderDisplay() {
            // Clear current display
            orderItemsContainer.innerHTML = '';

            if (state.currentOrder.items.length === 0) {
                orderItemsContainer.innerHTML = '<p class="text-sm text-gray-500 text-center py-4">No hay items en la orden</p>';
                sendToKitchenBtn.disabled = true;
                return;
            }

            // Calculate totals
            let subtotal = 0;
            
            // Add each item to display
            state.currentOrder.items.forEach(item => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;

                const itemElement = document.createElement('div');
                itemElement.className = 'flex justify-between items-center py-2 border-b border-gray-200';
                itemElement.innerHTML = `
                    <div>
                        <h4 class="font-medium">${item.name}</h4>
                        <p class="text-sm text-gray-500">${item.notes || 'Sin notas'}</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="font-bold text-primary">S/ ${itemTotal.toFixed(2)}</span>
                        <div class="flex items-center space-x-2">
                            <button class="decrease-item bg-gray-200 text-gray-700 w-6 h-6 rounded-full flex items-center justify-center" data-id="${item.id}">
                                <i class="fas fa-minus text-xs"></i>
                            </button>
                            <span class="quantity">${item.quantity}</span>
                            <button class="increase-item bg-gray-200 text-gray-700 w-6 h-6 rounded-full flex items-center justify-center" data-id="${item.id}">
                                <i class="fas fa-plus text-xs"></i>
                            </button>
                        </div>
                        <button class="remove-item text-red-500" data-id="${item.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                orderItemsContainer.appendChild(itemElement);
            });

            // Add event listeners to new buttons
            document.querySelectorAll('.decrease-item').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    decreaseItemQuantity(id);
                });
            });

            document.querySelectorAll('.increase-item').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    increaseItemQuantity(id);
                });
            });

            document.querySelectorAll('.remove-item').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    removeItemFromOrder(id);
                });
            });

            // Update totals
            const tax = subtotal * 0.18;
            const total = subtotal + tax;
            
            state.currentOrder.subtotal = subtotal;
            state.currentOrder.tax = tax;
            state.currentOrder.total = total;

            // Enable send button
            sendToKitchenBtn.disabled = false;
        }

        // Increase item quantity
        function increaseItemQuantity(id) {
            const item = state.currentOrder.items.find(i => i.id === id);
            if (item) {
                item.quantity += 1;
                updateOrderDisplay();
            }
        }

        // Decrease item quantity
        function decreaseItemQuantity(id) {
            const item = state.currentOrder.items.find(i => i.id === id);
            if (item && item.quantity > 1) {
                item.quantity -= 1;
                updateOrderDisplay();
            } else if (item && item.quantity === 1) {
                removeItemFromOrder(id);
            }
        }

        // Remove item from order
        function removeItemFromOrder(id) {
            state.currentOrder.items = state.currentOrder.items.filter(i => i.id !== id);
            updateOrderDisplay();
        }

        // Clear current order
        function clearCurrentOrder() {
            state.currentOrder.items = [];
            updateOrderDisplay();
        }

        // Show notification
        function showNotification(message, details) {
            state.notifications.push({ message, details });
            notificationCount.textContent = state.notifications.length;
            notificationBell.classList.remove('hidden');
            
            // Show toast
            toastMessage.textContent = message;
            toastDetails.textContent = details;
            notificationToast.classList.remove('hidden');
            notificationToast.classList.remove('translate-x-full');
            notificationToast.classList.add('translate-x-0');
            
            // Auto hide after 5 seconds
            setTimeout(hideNotification, 5000);
        }

        // Hide notification
        function hideNotification() {
            notificationToast.classList.remove('translate-x-0');
            notificationToast.classList.add('translate-x-full');
            
            // Remove the shown notification
            if (state.notifications.length > 0) {
                state.notifications.shift();
                notificationCount.textContent = state.notifications.length;
                
                if (state.notifications.length === 0) {
                    notificationBell.classList.add('hidden');
                }
            }
        }

        // Simulate WebSocket connection for real-time updates
        function simulateWebSocket() {
            // Simulate new order notification for kitchen
            setTimeout(() => {
                if (state.currentRole === 'kitchen') {
                    showNotification('Nueva Orden', 'Orden #127 para Mesa #7 recibida');
                }
            }, 3000);

            // Simulate order ready notification for waiter
            setTimeout(() => {
                if (state.currentRole === 'waiter') {
                    showNotification('Orden Lista', 'Orden #123 para Mesa #5 está lista para servir');
                }
            }, 8000);
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>